## 产品实现方案

### 一、系统的主要功能

- 用户管理，不同用户拥有自己的数据记录
- 闲置交易，可以在APP上买卖闲置物品
- 失物招领，可以在APP上发布寻找失物的求助、或者捡拾到失物后发布失物招领
- 个人信息管理，可以在个人页面管理”收藏“、”订单“、”个人信息“等



### 二、UI界面设计

参见main分支的readme文档，点开github对应仓库的主页即可看到



### 三、关键技术和技术难点

#### 1、页面布局

- APP主页面采取了**底部导航栏BottomNavigationView** + **ViewPager**的设计，实现了一个主页三个分区
- **首页**，**采用ViewPager**的方式，嵌套了**“闲置”** + **“失物”**两个Fragment分类页面，实现分类浏览
- **商品浏览区域**，采用**RecyclerView**布局，重定义了一个**RecyclerView.LayoutManager**，重写了**RecyclerView.Adapter类**，实现了两列的瀑布流式布局。使用**SwipeRefreshLayout布局**，实现了下拉刷新效果
- **商品浏览区子元素**，采取**CardView**卡片布局
- 主页设置一个**FloatingActionButton悬浮按钮**，作为**发布**的入口，**发布页**根据选择的**不同的发布类型**进行不同的跳转
- 个人页，使用**CircleImageView**，实现**圆形头像**的效果
- 个人信息页，**头像**使用了**CircleImageView控件**，实现圆形图片的效果，其余选项均采用CardView卡片布局



- **难点一**：为了获取视觉协调性，**设置系统状态栏为白底黑字**，结果出现了APP页面被状态栏遮挡的问题
- **难点二**：动态获取状态栏的高度，**动态调整页面高度**，达到可以适配不同机型尺寸的效果
- **难点三**：根据不同机型，动态调整RecyclerView中子元素的宽度
- **更多难点**，请参见开发记录文档（开发过程遇到非常多问题）



- **动效设计**：进入APP的动画效果、商品页下拉刷新效果



#### 2、后端数据库

- **难点一**：配置Bmob的使用环境
- **难点二**：**数据加载异步性**，数据的网络加载具有异步性，与画面的渲染速度不一致
- **难点三**：**数据的实时性**，通过下拉刷新，更新数据库的数据信息
- **难点四**：调用系统相册，获取相片URL，上传到Bmob
- **更多难点**，请参见开发记录文档（开发过程遇到非常多问题）



### 四、用户体验记录和分析

|      | 用户体验反馈                                                 | 改进                                                         |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1    | 输入框没有光标，无法看到输入位置                             | 修改editView的属性，显示焦点光标                             |
| 2    | 所有输入框弹出的虚拟键盘没有区别，输入验证码和价格时需要手动转换数字键盘 | 设置价格、验证码等特殊输入框的xml格式，自动弹出数字键盘      |
| 3    | 发布页面只能选择上传一张图片                                 | 图片选择框从单一的ImageView，改为RecyclerView，并设计一个算法，将选择照片的上限控制在6张 |
| 4    | 页面加载速度反映太慢                                         | 修改加载图片的格式，改为加载webp格式的压缩图片，减少加载时间 |
| 5    | 商品浏览页，卡片与卡片之间间隔太大                           | 由于卡片的宽度是设定死的，所以不能兼容不同机型，后续改进：动态获取屏幕宽度，动态改变卡片的宽度 |
| 6    | 底部导航栏需要点击两次才能跳转                               | 后续改进：                                                   |
| 7    | 没有留言功能                                                 | UI已经设计，由于时间不够，功能后续再添加                     |



### 五、已完成的改进和存在的问题

- **问题一**：用户之间的点对点通信功能还没有实现（由于时间不足。人力不够）
- **问题二**：目前只完成了一些基本的功能，还有很多功能细节有待后续实现，如目前只能添加收藏、还没有实现删除收藏