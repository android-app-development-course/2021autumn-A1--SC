## APP第三阶段汇报

### 一、吸引力和可用性

#### 1、吸引力

- **界面设计简约、操作简单、布局合理，视觉体验舒适**

- **风格：简约实用、没有使用浓艳的色彩，只使用必要的颜色点缀**

- **基本色：黄色（#ffea00）、蓝色（#4091c9）**

  <img src="C:\Users\mi\Desktop\Screenshot_1640865369.png" alt="Screenshot_1640865369" style="zoom: 33%;" />                      <img src="C:\Users\mi\Desktop\Screenshot_1640865443.png" alt="Screenshot_1640865443" style="zoom:33%;" />   



#### 2、可用性

- **该APP框架已经成型，具备了实际的基本功能，包括：发布商品、失物招领，在线下单，管理收藏、订单和个人信息**



### 二、开发的主要技术点和难点

#### 1、页面布局

- APP主页面采取了**底部导航栏BottomNavigationView** + **ViewPager**的设计，实现了一个主页三个分区
- **首页**，**采用ViewPager**的方式，嵌套了**“闲置”** + **“失物”**两个Fragment分类页面，实现分类浏览
- **商品浏览区域**，采用**RecyclerView**布局，重定义了一个**RecyclerView.LayoutManager**，重写了**RecyclerView.Adapter类**，实现了两列的瀑布流式布局。使用**SwipeRefreshLayout布局**，实现了下拉刷新效果
- **商品浏览区子元素**，采取**CardView**卡片布局
- 主页设置一个**FloatingActionButton悬浮按钮**，作为**发布**的入口，**发布页**根据选择的**不同的发布类型**进行不同的跳转
- 个人页，使用**CircleImageView**，实现**圆形头像**的效果
- 个人信息页，**头像**使用了**CircleImageView控件**，实现圆形图片的效果，其余选项均采用CardView卡片布局



- **难点一**：为了获取视觉协调性，**设置系统状态栏为白底黑字**，结果出现了APP页面被状态栏遮挡的问题
- **难点二**：动态获取状态栏的高度，**动态调整页面高度**，达到可以适配不同机型尺寸的效果
- **难点三**：根据不同机型，动态调整RecyclerView中子元素的宽度



- **动效设计**：进入APP的动画效果、商品页下拉刷新效果



#### 2、后端数据库

- **数据库：Bmob云**

- 数据表

  | 表     | 功能               |
  | ------ | ------------------ |
  | User   | 管理用户的注册登陆 |
  | Person | 管理用户个人信息   |
  | Goods  | 管理商品信息       |
  | Order  | 管理订单信息       |

- **User表**

  | 字段     | 含义                 | 类型              |
  | -------- | -------------------- | ----------------- |
  | username | 用户手机号           | String            |
  | password | 用户密码             | String            |
  | person   | 指向用户信息表的指针 | Person（Pointer） |

- **Person表**

  | 字段          | 含义               | 类型   |
  | ------------- | ------------------ | ------ |
  | username      | 手机号             | String |
  | ni_cheng      | 昵称               | String |
  | school        | 学校               | String |
  | schoolNum     | 学号               | String |
  | sex           | 性别               | String |
  | address       | 地址               | String |
  | user_pic      | 用户头像           | File   |
  | collect_goods | 收藏商品链接的列表 | Array  |

- **Goods表**

  | 字段        | 含义               | 类型          |
  | ----------- | ------------------ | ------------- |
  | owner       | 商品发布者         | User(Pointer) |
  | type        | 商品类型           | String        |
  | onshow      | 商品是否被下单     | Boolean       |
  | title       | 商品标题           | String        |
  | description | 商品描述           | String        |
  | price       | 商品价格           | String        |
  | pic_urls    | 商品照片的链接列表 | Array         |

- **Order表**

  | 字段    | 含义           | 类型             |
  | ------- | -------------- | ---------------- |
  | Goods   | 订单对应的商品 | Goods（Pointer） |
  | seller  | 卖家           | User（Pointer）  |
  | buyer   | 卖家           | User（Pointer）  |
  | price   | 成交价格       | String           |
  | address | 收获地址       | String           |
  | contact | 收获人电话     | String           |
  | date    | 成交时间       | String           |

  

- **难点一**：配置Bmob的使用环境
- **难点二**：**数据加载异步性**，数据的网络加载具有异步性，与画面的渲染速度不一致
- **难点三**：**数据的实时性**，通过下拉刷新，更新数据库的数据信息
- **难点四**：调用系统相册，获取相片URL，上传到Bmob





### 三、测试设计

#### 1、注册登陆模块测试

| 注册测试                           | 测试结果（通过打√） |
| ---------------------------------- | ------------------- |
| 是否能使用手机号作为账号           | √                   |
| 是否能检测出重复注册账号           | √                   |
| 缺少必要信息时是否能进行提示       | √                   |
| 是否能使用其他号码或自定义账号注册 | ×                   |
| 能否检测两次密码是否相同           | √                   |
| 是否能正确验证短信验证码           | √                   |
| 缺少验证码或验证码错误是否能注册   | ×                   |

| 登录测试                         | 测试结果（通过打√） |
| -------------------------------- | ------------------- |
| 是否能检测即将登录账号是否已注册 | √                   |
| 是否能通过密码正常登录           | √                   |
| 缺少必要信息时是否能进行提示     | √                   |
| 是否能通过短信验证码正常登录     | √                   |
| 是否能通过手机号作为账号登录     | √                   |
| 是否能使用手机号之外的账号登录   | ×                   |
| 是否能够记住密码登录             | √                   |
| 登录后能否正常跳转到应用主页面   | √                   |

| 忘记密码测试                   | 测试结果（通过打√） |
| ------------------------------ | ------------------- |
| 能否正确验证短信验证码找回密码 | √                   |
| 发送验证码时识别账号是否已注册 | ×                   |
| 未注册账号能否找回密码成功     | ×                   |



#### 2、商品模块

| 发布功能测试                               | 测试结果（通过打√） |
| ------------------------------------------ | ------------------- |
| 照片是否上传成功                           | √                   |
| 不选择照片，是否能发布商品                 | √                   |
| 商品是否上传成功                           | √                   |
| 商品与用户是否绑定成功                     | √                   |
|                                            |                     |
| **加载功能测试**                           |                     |
| 商品的照片urls为空，是否会出错             | √                   |
| 商品的标题、描述、价格字段为空，是否会出错 | √                   |



#### 3、订单模块

| **下单功能测试**                 | 测试结果（通过打√） |
| -------------------------------- | ------------------- |
| 下单之后，商品是否加入“我的订单” | √                   |
| 下单之后，商品是否从浏览页清除   | √                   |
|                                  |                     |
| **查看“我的订单”功能测试**       |                     |
| 能否区分买入与卖出的订单         | √                   |



#### 4、个人信息模块

| 编辑“个人信息”功能测试           | 测试结果（通过打√） |
| -------------------------------- | ------------------- |
| 修改信息是否保存到数据库         | √                   |
| 编辑提交字段为空，是否出错       | √                   |
| 账号信息是否保证不可修改         | √                   |
|                                  |                     |
| **加载个人信息功能测试**         |                     |
| 数据库对应信息字段为空，是否出错 | √                   |
| 信息修改后是够及时更新           | √                   |



### 四、用户体验和改进

|      | 用户体验反馈                                                 | 改进                                                         |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1    | 输入框没有光标，无法看到输入位置                             | 修改editView的属性，显示焦点光标                             |
| 2    | 所有输入框弹出的虚拟键盘没有区别，输入验证码和价格时需要手动转换数字键盘 | 设置价格、验证码等特殊输入框的xml格式，自动弹出数字键盘      |
| 3    | 发布页面只能选择上传一张图片                                 | 图片选择框从单一的ImageView，改为RecyclerView，并设计一个算法，将选择照片的上限控制在6张 |
| 4    | 页面加载速度反映太慢                                         | 修改加载图片的格式，改为加载webp格式的压缩图片，减少加载时间 |
| 5    | 商品浏览页，卡片与卡片之间间隔太大                           | 由于卡片的宽度是设定死的，所以不能兼容不同机型，后续改进：动态获取屏幕宽度，动态改变卡片的宽度 |
| 6    | 底部导航栏需要点击两次才能跳转                               | 后续改进：                                                   |
| 7    | 没有留言功能                                                 | UI已经设计，由于时间不够，功能后续再添加                     |
|      |                                                              |                                                              |



### 五、团队分工

| 成员   | 工作                                                 |
| ------ | ---------------------------------------------------- |
| 丘智聪 | 商品发布模块、商品加载显示模块、总体UI设计、搜索模块 |
| 吴俊广 | 注册登陆模块、订单模块、测试工作                     |
| 吴思颖 | 个人信息模块、收藏模块、动效制作                     |

- **感受：在合作交流中，发现每个人都有自己擅长的闪光点，合作过程也是一个相互学习的过程，大家相互传授自己擅长的技能，学习的效率会高很多。**
